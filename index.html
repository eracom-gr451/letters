<doctype html>
<html>
	<head>
			<script src ="jquery-1.11.2.min.js"></script>
			<link href="https://fonts.googleapis.com/css?family=Roboto+Mono" rel="stylesheet">

			<style>
			
			body {
				overflow: hidden;
				background: #000;
			}

			.lettre {
				font-family: "Roboto Mono";
				margin: 0;
				top: -300px;
				left: 30%;
				position: absolute;
				font-size: 10vw;
				padding: 0;
			}

			.lettre-active {
				/*color: hotpink !important ;*/
			}

			</style>
	</head>
	<body>
	<script>

		$(document).ready(function() {

			// Declaration de variables globales

			var repeater;

			var numerotation = 0;

			var typecolor = "#eee";

			var positionverticale = 76;

			var alphabet = new Array("a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z",
				"&","?",
				//"0", "1","2","3","4","5","6","7","8","9"
				);

			var glyph = 'x';

			var gameover = -16;

			function ProchaineLettre() {

				// Modification de variables globales

				repeater = setTimeout(ProchaineLettre, 1000);

				numerotation = numerotation + 1;

				glyph = alphabet[Math.floor(Math.random()*alphabet.length)];

				// Déclaration de variables locales
				// position aléatoire entre 5 et 95...

				var position = Math.floor((Math.random() * 105) - 5);

				// Actions

				$( ".lettre-active" ).removeClass("lettre-active");

				// 1. on créé la prochaine lettre.
				$("body").append("<h1 class='lettre lettre-no-"+numerotation+"'>"+glyph+"</h1>");

				// on donne un ID unique à l'élément
				$( ".lettre-no-"+numerotation ).addClass("lettre-active");

				// on applique l'animation.

				// console.log('position verticale: '+positionverticale);

				$( ".lettre-no-"+numerotation ).animate({
					top: positionverticale+ "vh"
					}, 1000, "linear", function() {
					// Animation complete.
				});

				// on applique du CSS à un élément, exemple:

				$( ".lettre-no-"+numerotation ).css({
			      "left": position+"%",
			      "font-weight": "bolder",
			      "color": typecolor
			    });


				if (positionverticale < gameover) {
					
					reset();

					}

				// on diminue la hauteur pour faire monter les lettres

				positionverticale = positionverticale - 6;

			}; // Fin de la fonction ProchaineLettre

			function reset() {
	        // on veut que les lettres recommencent depuis en bas
	        positionverticale = 76;
	        // reset font color:
			}

			function stop() {
	        if (repeater) {
	            clearTimeout(repeater);
	            timer = 0;
							console.log("called stop");
	        }
			}

			function colorChange() {
	      // Redefine global variable typecolor
	      // random number from 0 to 360
	      var hue = Math.floor((Math.random() * 360));
	      typecolor = "hsl("+hue+", 100%, 50%)";
			}


			// ce qui se passe si on clique sur la lettre active

			$('body').on('keypress',function ( event ) {
        
			  var myChar = String.fromCharCode(event.which);

			  if ( myChar == glyph ) {
			  	console.log("bingo");
			  	// on déclenche un changement de couleur 
			  	colorChange();
			  } else {
			  	console.log("raté");
			  }
        
    	});

    	
			// on appelle la fonction une première fois pour déclencher le processus
			ProchaineLettre();



		}); // fin du Document Ready

		


	</script>


	</body>
</html>
